<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.2/css/all.css" />
    <link rel="stylesheet" href="https://www.markuptag.com/bootstrap/5/css/bootstrap.min.css" />
</head>

<body>
    <button type="button" class="btn btn-warning mx-auto d-block position-absolute top-0 end-0" data-bs-toggle="modal"
        data-bs-target="#modalForm">
        Register
    </button>
    <button type="button" id ="btnConsLS" class="btn btn-danger btn-outline-primary position-absolute top-50 end-0">
        Данные в Local Storage
    </button>
    <button type="button" id ="btnClearLS" class="btn btn-danger btn-outline-primary position-absolute top-50 end-50">
        Очистить Local Storage
    </button>
    <!-- Modal FORM REGISTRATION -->
    <div class="modal fade" id="modalForm" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Register</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="registerForm">
                        <div class="mb-3">
                            <label class="form-label">Email Address</label>
                            <input type="text" class="form-control" id="name" name="name"
                                placeholder="Username" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" name="password"
                                placeholder="Password" />
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe" />
                            <label class="form-check-label" for="rememberMe">Remember me</label>
                        </div>
                        <div class="modal-footer d-block">
                            <p class="float-start">Not yet account <a href="#">Sign Up</a></p>
                            <button type="submit" class="btn btn-warning float-end">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://www.markuptag.com/bootstrap/5/js/bootstrap.bundle.min.js"></script>
    
                            <!--СКРИПТ с ЛокалСторейдж-->
                            <script>
//добавляем в прототип метод setObject и getObject, чтобы в дальнейшем оперировать объектами напрямую, а не конвертировать JSON
                                    Storage.prototype.setObject = function (key, value) {
                                        this.setItem(key, JSON.stringify(value));
                                         };
                                    Storage.prototype.getObject = function (key) {
                                        return JSON.parse(this.getItem(key));}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

                                let userRegisterForm = document.querySelector('[id="registerForm"]');
                                let storedUsers = JSON.parse(localStorage.getItem('userList'));
                                if (!storedUsers){
                                    storedUsers = [];
                                };
                                userRegisterForm.addEventListener("submit", function (event) {
                                    console.log(event);
                                    let username = event.target.elements.namedItem('name').value;//см. путь в консоле, чтобы отследить поле, откуда брать данные
                                    let password = event.target.elements.namedItem('password').value;
                                    user = {
                                        username,
                                        password,
                                    };
                                    storedUsers.push(user);
                                    event.preventDefault();//запрещаем обновлять страницу при исполнении события ( по умолчанию обновляет и обнуляет консоль)
                                    event.target.reset;//Очищаем все поля формы
                                    /* localStorage.setItem('userList', JSON.stringify(storedUsers)); Старая запись до добавления методов в прототип */
                                    localStorage.setObject('userList', storedUsers);
                                });

                                let btnConsLS = document.querySelector('[id ="btnConsLS"]');
                                btnConsLS.addEventListener("click",function(){
                                    /* console.log(localStorage.getItem('userList')); Старая запись до добавления методов в прототип - раньше выдавало строку, длашее будет выдавать массив из объектов */
                                    console.log(localStorage.getObject('userList'));
                                });
                                
                                //Очистка localStorage
                                    let btnClearLS = document.querySelector('[id ="btnClearLS"]');
                                    btnClearLS.addEventListener("click",function(){
                                    localStorage.clear();
                                    console.log('LocalStorage очищен!')
                                });
                            </script>
</body>

</html>